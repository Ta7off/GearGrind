{% extends 'core/base.html' %}
{% load static %}

{% block title %}Home{% endblock %}
{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block page_class %}Search Results{% endblock %}

{% block content %}
    <form method="GET" action="{% url 'search-results' %}" class="search-form">
        <input type="text" name="q" placeholder="Search..." class="search-input">
        <button type="submit" class="search-button">üîç</button>
    </form>

    <div class="search-wrapper">
        <h2>Search Results for "<span class="query">{{ query }}</span>"</h2>

        {% if results %}
            {% for post in results %}
                <div class="post">
                    <div class="author-info">
                        <a href="{% url 'user-details' post.author.id %}" class="author-image">
                            <img src="{{ post.author.profile_image }}" alt="author-pfp">
                        </a>
                        <a href="{% url 'user-details' post.author.id %}" class="author-username">
                            <p>
                                <strong>
                                    {{ post.author.username }}
                                </strong>
                            </p>
                        </a>
                    </div>
                    <a href="{% url 'detail-post' post.pk %}">
                        <div class="post-image">
                            {% if post.image %}
                                <img src="{{ post.image }}" alt="post-image">
                            {% endif %}
                        </div>
                        <div class="post-text">
                            <h1>{{ post.title }}</h1>
                            <p>{{ post.description|truncatechars:80 }}</p>
                            <p class="post-date">date created:{{ post.created_at|date:"F j, Y, H:i" }}</p>
                        </div>
                        {% if post.is_listing %}
                            <h2 class="on-sale">On Sale</h2>
                        {% endif %}
                    </a>
                </div>
            {% endfor %}
        {% else %}
            <p>No results found. Try a different keyword?</p>
        {% endif %}
    </div>
{% endblock %}
